# 水印文件本地应用 PRD

## 一、产品概述

本产品是一款运行于 Windows 或 MacOS 的本地图片批量加水印工具。支持主流图片格式，提供文本和图片水印，支持多种布局和样式，具备实时预览和模板管理功能，适合摄影师、电商、设计师等用户批量处理图片水印需求。

---

## 二、核心功能需求

### 1. 文件处理

#### 1.1 导入图片
- 支持单张图片拖拽或通过文件选择器导入。
- 支持批量导入（多选或整个文件夹）。
- 在界面显示已导入图片列表（缩略图+文件名）。

#### 1.2 支持格式
- 输入格式：JPEG、PNG（含透明通道）、BMP、TIFF。
- 输出格式：用户可选 JPEG 或 PNG。

#### 1.3 导出图片
- 用户指定输出文件夹，默认禁止导出到原文件夹。
- 导出文件命名规则：
  - 保留原文件名
  - 添加自定义前缀（如 wm_）
  - 添加自定义后缀（如 _watermarked）
- JPEG 支持质量（压缩率）调节（0-100）。
- 支持导出时调整图片尺寸（宽度、高度或百分比缩放）。

---

### 2. 水印类型

#### 2.1 文本水印
- 用户自定义文本内容。
- 可选系统字体、字号、粗体、斜体。
- 支持字体颜色选择。
- 支持透明度调节（0-100%）。
- 支持阴影或描边效果。

#### 2.2 图片水印
- 用户可选择本地图片（如 Logo）作为水印。
- 支持 PNG 透明通道。
- 支持缩放（比例或自由调整）。
- 支持透明度调节（0-100%）。

---

### 3. 水印布局与样式

#### 3.1 实时预览
- 所有水印调整实时显示在主预览窗口。
- 可切换预览不同图片。

#### 3.2 位置
- 九宫格预设（四角、正中心）一键定位。
- 支持鼠标拖拽水印到任意位置。

#### 3.3 旋转
- 支持滑块或输入框调整水印旋转角度。

---

### 4. 配置管理

#### 4.1 水印模板
- 可保存当前水印设置为模板。
- 支持加载、管理、删除模板。
- 启动时自动加载上次设置或默认模板。

---

## 三、非功能性需求

- 支持 Windows 10+ 和 MacOS 11+。
- UI 简洁易用，支持高分屏。
- 处理速度快，支持多线程/异步处理。
- 程序稳定，异常处理完善。
- 支持中文和英文界面。

---

## 四、用户界面草图（简述）

- 左侧：图片列表（缩略图+文件名）
- 中间：主预览窗口
- 右侧：水印设置面板（文本/图片、样式、布局、模板管理）
- 顶部：导入、导出、设置按钮

---

## 五、后续扩展建议

- 支持批量处理 PDF 文件。
- 支持云端模板同步。
- 支持命令行批量处理模式。

---

## 六、里程碑

1. 文件导入/导出功能
2. 文本水印基础功能
3. 图片水印基础功能
4. 水印布局与实时预览
5. 模板管理
6. 高级样式与导出参数